<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Migración en México: Infografía Interactiva</title>
  
  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Chart.js para gráficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  
  <!-- Leaflet para mapas interactivos -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  
  <!-- AOS para animaciones de scroll -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- SwiperJS para carruseles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  
  <style id="app-style">
    :root {
      --primary-color: #3b82f6;
      --secondary-color: #f59e0b;
      --text-color: #1f2937;      /* Texto más oscuro para modo claro */
      --text-muted: #4b5563;      /* Texto secundario para modo claro */
      --bg-color: #f9fafb;
      --card-bg: #ffffff;
      --border-color: #e5e7eb;
      --transition-speed: 0.3s;
    }
    
    body.dark-theme {
      --primary-color: #60a5fa;
      --secondary-color: #fbbf24;
      --text-color: #f9fafb;      /* Texto más claro para modo oscuro */
      --text-muted: #d1d5db;      /* Texto secundario para modo oscuro */
      --bg-color: #111827;
      --card-bg: #1f2937;
      --border-color: #374151;
    }

    /* Aplicar colores de texto */
    body {
      font-family: 'Inter', sans-serif;
      color: var(--text-color);
      background-color: var(--bg-color);
      transition: background-color var(--transition-speed), color var(--transition-speed);
    }

    /* Mejorar contraste en tarjetas */
    .card {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      transition: transform 0.3s, box-shadow 0.3s, background-color var(--transition-speed);
    }

    /* Texto secundario */
    .text-muted {
      color: var(--text-muted);
    }

    /* Mejorar contraste en timeline */
    .timeline-item span {
      color: var(--text-color);    /* Usar variable de color en lugar de valor fijo */
      font-weight: 600;
    }

    /* Asegurar contraste en encabezados */
    h1, h2, h3, h4, h5, h6 {
      color: var(--text-color);
    }

    /* Mejorar contraste en footer */
    footer {
      background-color: var(--card-bg);
      color: var(--text-color);
    }

    /* Ajustar color de enlaces */
    a {
      color: var(--primary-color);
      transition: color var(--transition-speed);
    }

    a:hover {
      color: var(--secondary-color);
    }

    /* Mejorar contraste en texto de historia-overlay */
    .historia-overlay {
      background: linear-gradient(transparent, rgba(0,0,0,0.9));  /* Fondo más oscuro */
    }
    
    .card {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      transition: transform 0.3s, box-shadow 0.3s, background-color var(--transition-speed);
    }
    
    .card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -5px rgba(0, 0, 0, 0.08);
    }
    
    .section-title {
      position: relative;
      display: inline-block;
      margin-bottom: 2rem;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -10px;
      width: 50px;
      height: 4px;
      background-color: var(--primary-color);
      transition: width 0.3s;
    }
    
    .section-title:hover::after {
      width: 100%;
    }
    
    .timeline-item {
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .timeline-item {
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .timeline-item span {
      color: #1f2937; /* Darker text for better visibility in light theme */
      font-weight: 600; /* Make text bolder */
    }
    
    .timeline-item:hover {
      transform: scale(1.1);
    }
    
    .map-container {
      height: 500px;
      border-radius: 0.5rem;
      overflow: hidden;
    }
    
    .route-path {
      stroke-dasharray: 10;
      stroke-dashoffset: 1000;
      animation: drawRoute 3s linear forwards;
    }
    
    @keyframes drawRoute {
      to { stroke-dashoffset: 0; }
    }
    
    .header-fixed {
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .btn-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--card-bg);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s, transform 0.3s;
    }
    
    .btn-icon:hover {
      transform: scale(1.1);
      background-color: var(--primary-color);
      color: white;
    }
    
    .swiper {
      width: 100%;
      height: 100%;
      padding: 2rem 0;
    }
    
    .historia-card {
      position: relative;
      height: 300px;
      overflow: hidden;
      border-radius: 0.5rem;
    }
    
    .historia-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      padding: 1.5rem;
      color: white;
    }
    
    /* Estilos para animaciones de datos */
    .icon-animated {
      transition: transform 0.5s;
    }
    
    .card:hover .icon-animated {
      transform: scale(1.2) rotate(10deg);
    }
    
    /* Timeline horizontal */
    .timeline-horizontal {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 2rem 0;
    }
    
    .timeline-horizontal::before {
      content: '';
      position: absolute;
      height: 4px;
      background-color: var(--border-color);
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      z-index: 0;
    }
    
    #scroll-top-btn {
      opacity: 0;
      transition: opacity 0.3s, transform 0.3s;
      transform: translateY(20px);
    }
    
    #scroll-top-btn.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* New animations */
    /* 1. Main container animation */
    .fade-in-container {
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* 3. Enhanced hover effects */
    .card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -5px rgba(0, 0, 0, 0.08);
    }
    
    .card:hover .icon-animated {
      transform: scale(1.3) rotate(15deg);
    }
    
    /* 4. Loading animations for media */
    .media-container {
      position: relative;
    }
    
    .media-loading {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(0,0,0,0.5);
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Animaciones para el modal de video */
    .video-modal-fade {
      transition: background 0.3s;
      background: rgba(0,0,0,0);
    }
    .video-modal-fade.show {
      background: rgba(0,0,0,0.7);
      animation: modalFadeIn 0.3s forwards;
    }
    .video-modal-fade.hide {
      animation: modalFadeOut 0.3s forwards;
    }
    @keyframes modalFadeIn {
      from { background: rgba(0,0,0,0); }
      to   { background: rgba(0,0,0,0.7); }
    }
    @keyframes modalFadeOut {
      from { background: rgba(0,0,0,0.7); }
      to   { background: rgba(0,0,0,0); }
    }
    .video-modal-content-anim {
      transform: scale(0.95);
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    .video-modal-fade.show .video-modal-content-anim {
      transform: scale(1);
      opacity: 1;
      transition-delay: 0.1s;
    }
    .video-modal-fade.hide .video-modal-content-anim {
      transform: scale(0.95);
      opacity: 0;
    }

    /* Animación de rebote para botones de compartir */
    @keyframes share-bounce {
      0%   { transform: scale(1); }
      30%  { transform: scale(1.15) rotate(-5deg);}
      50%  { transform: scale(0.95) rotate(3deg);}
      70%  { transform: scale(1.05) rotate(-2deg);}
      100% { transform: scale(1) rotate(0);}
    }

    .share-btn-anim {
      transition: box-shadow 0.3s, background 0.3s, transform 0.3s;
      box-shadow: 0 2px 8px rgba(59,130,246,0.08);
      position: relative;
      overflow: hidden;
    }

    .share-btn-anim:hover, .share-btn-anim:focus {
      animation: share-bounce 0.5s;
      box-shadow: 0 6px 20px rgba(59,130,246,0.18);
      z-index: 1;
    }

    .share-btn-anim i {
      transition: transform 0.3s, color 0.3s;
    }

    .share-btn-anim:hover i {
      transform: scale(1.25) rotate(-10deg);
      filter: brightness(1.2);
    }

    .share-btn-anim span {
      transition: color 0.3s;
    }

    .share-btn-anim:hover span {
      color: var(--primary-color);
    }

    /* Mejorar contraste de números y estadísticas */
    .font-medium {
      font-weight: 600;
      color: var(--primary-color);
    }

    /* Mejorar contraste de cifras en tarjetas */
    .card span[class*="text-"] {
      font-size: 1.1rem;
      font-weight: 700;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    /* Mejorar visibilidad de texto en timeline */
    .timeline-item span {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-color);
      background-color: var(--card-bg);
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Mejorar contraste en cifras destacadas */
    [class*="text-blue-600"] { color: #2563eb !important; }
    [class*="text-yellow-600"] { color: #d97706 !important; }
    [class*="text-green-600"] { color: #059669 !important; }
    [class*="text-red-600"] { color: #dc2626 !important; }
    [class*="text-purple-600"] { color: #7c3aed !important; }
    [class*="text-pink-600"] { color: #db2777 !important; }

    /* Modo oscuro */
    .dark-theme [class*="text-blue-600"] { color: #60a5fa !important; }
    .dark-theme [class*="text-yellow-600"] { color: #fbbf24 !important; }
    .dark-theme [class*="text-green-600"] { color: #34d399 !important; }
    .dark-theme [class*="text-red-600"] { color: #f87171 !important; }
    .dark-theme [class*="text-purple-600"] { color: #a78bfa !important; }
    .dark-theme [class*="text-pink-600"] { color: #f472b6 !important; }

    /* Mejorar legibilidad de textos grandes */
    .text-4xl, .text-5xl {
      font-weight: 800;
      letter-spacing: -0.025em;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    /* Mejorar contraste en estadísticas */
    .text-lg, .text-xl {
      font-weight: 500;
      line-height: 1.5;
    }

    /* Asegurar texto negro para el contenido principal */
    .text-gray-600 {
      color: #1f2937 !important; /* Color negro más suave */
    }

    /* Mejorar contraste para el texto del encabezado */
    h2.text-4xl, 
    h2.text-5xl,
    .text-lg,
    .text-xl {
      color: #111827; /* Negro más intenso */
    }

    /* Para el texto descriptivo */
    p {
      color: #374151; /* Negro medio para mejor legibilidad */
    }

    /* Asegurar que el modo oscuro mantenga su contraste */
    .dark-theme .text-gray-600 {
      color: #e5e7eb !important;
    }

    .dark-theme p {
      color: #d1d5db;
    }

    .dark-theme h2.text-4xl,
    .dark-theme h2.text-5xl,
    .dark-theme .text-lg,
    .dark-theme .text-xl {
      color: #f9fafb;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Header fijo -->
  <header class="header-fixed fixed top-0 left-0 right-0 z-50 bg-opacity-80 dark:bg-opacity-80 bg-white dark:bg-gray-900 shadow-md">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-2xl md:text-3xl font-bold text-primary-600 dark:text-primary-400">
        <span class="text-blue-600 dark:text-blue-400">Migración</span> en México
      </h1>
      <div class="flex items-center space-x-2">
        <button id="scroll-top-btn" class="btn-icon" aria-label="Volver arriba">
          <i class="fas fa-arrow-up"></i>
        </button>
        <button id="theme-toggle" class="btn-icon" aria-label="Cambiar tema">
          <i class="fas fa-moon dark:hidden"></i>
          <i class="fas fa-sun hidden dark:block"></i>
        </button>
        <button id="share-btn" class="btn-icon" aria-label="Compartir">
          <i class="fas fa-share-alt"></i>
        </button>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 pt-24 pb-16 fade-in-container">
    <!-- Introducción -->
    <section class="mb-20 text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6" data-aos="fade-up">La Migración en México</h2>
      <p class="text-lg md:text-xl max-w-3xl mx-auto text-gray-600 dark:text-gray-300" data-aos="fade-up" data-aos-delay="100">
        Una infografía interactiva sobre los efectos de la migración en México, sus causas, rutas y consecuencias.
      </p>
    </section>

    <!-- Sección 1: Datos Clave -->
    <section class="mb-20">
      <h2 class="section-title text-3xl font-bold" data-aos="fade-right">Datos Clave</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Tarjeta 1 -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up">
          <div class="flex items-center mb-4">
            <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-full mr-4">
              <i class="fas fa-users text-blue-600 dark:text-blue-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Sociedad</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            La migración ha transformado la estructura demográfica de ciertas regiones, generando cambios significativos en la composición familiar y comunitaria.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-blue-600 dark:text-blue-400 font-medium">+3.5M personas afectadas</span>
          </div>
        </div>
        
        <!-- Tarjeta 2 -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up" data-aos-delay="100">
          <div class="flex items-center mb-4">
            <div class="bg-yellow-100 dark:bg-yellow-900 p-3 rounded-full mr-4">
              <i class="fas fa-money-bill-wave text-yellow-600 dark:text-yellow-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Economía</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            Las remesas representan una de las principales fuentes de divisas para México, superando incluso los ingresos del turismo en algunas regiones.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-yellow-600 dark:text-yellow-400 font-medium">$58.5B USD in remesas (2024)</span>
          </div>
        </div>
        
        <!-- Tarjeta 3 -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up" data-aos-delay="200">
          <div class="flex items-center mb-4">
            <div class="bg-green-100 dark:bg-green-900 p-3 rounded-full mr-4">
              <i class="fas fa-graduation-cap text-green-600 dark:text-green-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Educación</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            Los niveles educativos en las comunidades de origen experimentan cambios notables, tanto positivos como negativos, debido a los patrones migratorios.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-green-600 dark:text-green-400 font-medium">-12% deserción escolar</span>
          </div>
        </div>

        <!-- Tarjeta 4: Salud -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up" data-aos-delay="300">
          <div class="flex items-center mb-4">
            <div class="bg-red-100 dark:bg-red-900 p-3 rounded-full mr-4">
              <i class="fas fa-heartbeat text-red-600 dark:text-red-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Salud</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            El acceso a servicios de salud para migrantes ha mejorado, pero aún existen retos importantes en cobertura y atención médica oportuna.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-red-600 dark:text-red-400 font-medium">+20% acceso a salud</span>
          </div>
        </div>

        <!-- Tarjeta 5: Seguridad -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up" data-aos-delay="400">
          <div class="flex items-center mb-4">
            <div class="bg-purple-100 dark:bg-purple-900 p-3 rounded-full mr-4">
              <i class="fas fa-shield-alt text-purple-600 dark:text-purple-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Seguridad</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            El 35% de los migrantes reportan haber enfrentado situaciones de riesgo o violencia durante su trayecto migratorio.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-purple-600 dark:text-purple-400 font-medium">35% en riesgo</span>
          </div>
        </div>

        <!-- Tarjeta 6: Niñez Migrante -->
        <div class="card rounded-lg p-6 shadow-md" data-aos="fade-up" data-aos-delay="500">
          <div class="flex items-center mb-4">
            <div class="bg-pink-100 dark:bg-pink-900 p-3 rounded-full mr-4">
              <i class="fas fa-child text-pink-600 dark:text-pink-400 text-2xl icon-animated"></i>
            </div>
            <h3 class="text-xl font-semibold">Niñez Migrante</h3>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            Más de 150,000 niñas y niños migrantes cruzaron México en 2024, muchos de ellos no acompañados.
          </p>
          <div class="mt-4 flex justify-end">
            <span class="text-pink-600 dark:text-pink-400 font-medium">+150,000 niños</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección 2: Tipos de Migración -->
    <section class="mb-20">
      <h2 class="section-title text-3xl font-bold" data-aos="fade-right">Tipos de Migración</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
        <div class="card p-6 rounded-lg shadow-md" data-aos="fade-up">
          <h3 class="text-xl font-semibold mb-4">Por Motivo</h3>
          <div class="aspect-square">
            <canvas id="chartMotivos"></canvas>
          </div>
        </div>
        <div class="card p-6 rounded-lg shadow-md" data-aos="fade-up" data-aos-delay="100">
          <h3 class="text-xl font-semibold mb-4">Por Duración</h3>
          <div class="aspect-square">
            <canvas id="chartDuracion"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección 3: Mapa de Rutas -->
    <section class="mb-20">
      <h2 class="section-title text-3xl font-bold" data-aos="fade-right">Principales Rutas Migratorias</h2>
      <div class="card shadow-md rounded-lg overflow-hidden" data-aos="fade-up">
        <div id="map-container" class="map-container"></div>
        <div class="p-4 bg-gray-50 dark:bg-gray-800 border-t dark:border-gray-700">
          <div class="flex items-center">
            <span class="mr-2 text-gray-700 dark:text-gray-300">Línea de tiempo:</span>
            <input type="range" id="timeline-slider" min="1980" max="2025" value="2025" step="5" class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer">
            <span id="year-display" class="ml-2 font-medium">2025</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección 4: Estadísticas Históricas -->
    <section class="mb-20">
      <h2 class="section-title text-3xl font-bold" data-aos="fade-right">Estadísticas Históricas</h2>
      <div class="card p-6 shadow-md rounded-lg" data-aos="fade-up">
        <div class="timeline-horizontal mb-10">
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="1970">
            <span class="font-medium">1970</span>
          </div>
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="1980">
            <span class="font-medium">1980</span>
          </div>
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="1990">
            <span class="font-medium">1990</span>
          </div>
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="2000">
            <span class="font-medium">2000</span>
          </div>
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="2010">
            <span class="font-medium">2010</span>
          </div>
          <div class="timeline-item z-10 bg-white dark:bg-gray-800 rounded-full p-3 shadow-md" data-year="2020">
            <span class="font-medium">2020</span>
          </div>
        </div>
        <div class="h-80">
          <canvas id="chartHistorico"></canvas>
        </div>
      </div>
    </section>

    <!-- Sección 5: Historias de Migrantes -->
    <section class="mb-20">
      <h2 class="section-title text-3xl font-bold" data-aos="fade-right">Historias de Migrantes</h2>
      <div class="swiper historias-swiper" data-aos="fade-up">
        <div class="swiper-wrapper">
          <!-- Historia 1 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/9SULaMRuDns/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLCo-t9yEYUiaiMeBOrEA6-mPtf4bA" alt="Migrantes con Fe y no con Miedo Noticia" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">Migrantes: Fe más fuerte que el miedo</h3>
                <p class="mb-3 italic text-sm text-gray-100">"El dolor no nos detiene, seguimos avanzando."</p>
                <p class="mb-3">Migrantes enfrentan peligro, pero no renuncian a su sueño.</p>
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12 play-video-btn"
                  data-youtube="https://www.youtube.com/embed/j_LPhU84pUk?si=wRHirI5gVGK2E0cq">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Historia 2 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/hVJMfzMbF3M/maxresdefault.jpg" alt="Noticia sobre Antonio García" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">Antonio García: Un sueño interrumpido</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Me quitaron todo, pero no las ganas de volver a empezar."</p>
                <p class="mb-1">Deportado y comenzando de nuevo en Guerrero</p>
                <button id="antonio-video-btn" class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Historia 3 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://diariocorreo.pe/resizer/FH8CytFKIXRJCv2SSZHhM9a7rqg=/580x330/smart/filters:format(jpeg):quality(75)/arc-anglerfish-arc2-prod-elcomercio.s3.amazonaws.com/public/EKABUAFPPBER5GBCWC74HB5Y74.png" alt="Noticia de Mamoudou Gassama" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">Mamoudou Gassama: Un héroe sin límites</h3>
                <p class="mb-3 italic text-sm text-gray-100">"El coraje abre caminos que nunca imaginé."</p>
                <p class="mb-3">Recibe nacionalidad francesa por salvar a niño</p>
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Historia 4 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/KEMIk5S_nio/maxresdefault.jpg" alt="Restaurante mexicano" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">Secuestrados</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Lo golpearon, le dieron un tiro en la cabeza"</p>
                <p class="
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Historia 5 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/4j8kz5gQ_rs/maxresdefault.jpg" alt="Las Madres en las fronteras y su sufrimiento" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">Madres en la frontera</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Les dije que algún día iba a volver a verlos"</p>
                <p class="mb-3">Testimonios de Migrantes tras cruzar el río Grande</p>
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Historia 6 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/QFHVO43ukRE/sddefault.jpg" alt="Anderson y su Padre Noticia" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">El desgarrador caso de Anderson</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Todos los días que vengo caminante y aguantando hambre"</p>
                <p class="mb-3">El desgarrador testimonio de un niño migrante y su padre</p>
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Historia 7 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/GzA5IgRggHM/sddefault.jpg" alt="La violencia contra los Migrantes Noticia" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">La violencia hacia los Migrantes</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Pensé que iba a morir bajo las balas"</p>
                <p class="mb-3">La triste historia de los migrantes
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Historia 8 -->
          <div class="swiper-slide">
            <div class="historia-card shadow-lg">
              <img src="https://i.ytimg.com/vi/pjZhf9zDGGs/maxresdefault.jpg" alt="Joven Guatema" class="w-full h-full object-cover">
              <div class="historia-overlay">
                <h3 class="text-xl font-bold mb-2">El sueño americano de Rodolfo</h3>
                <p class="mb-3 italic text-sm text-gray-100">"Todos venimos a Estados Unidos para triunfar."</p>
                <p class="mb-3">Joven guatemalteco pasa de los basureros a la legalidad</p>
                <button class="bg-white text-gray-900 rounded-full flex items-center justify-center w-12 h-12">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </section>
  </main>

  <footer class="py-10 border-t py-10 dark">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <h3 class="text-xl font-bold">Migración en México: Infografía Interactiva</h3>
          <p class="text-gray-600 dark:text-gray-400">© 2025 - Proyecto Académico</p>
        </div>
        <div>
          <h4 class="font-semibold mb-2">Fuentes y Referencias</h4>
          <ul class="text-gray-600 dark:text-gray-400">
            <li><a href="javascript:void(0)" class="hover:underline">Instituto Nacional de Migración</a></li>
            <li><a href="javascript:void(0)" class="hover:underline">CONAPO</a></li>
            <li><a href="javascript:void(0)" class="hover:underline">Banco de México</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- Dialog de compartir -->
  <div id="share-dialog" class="fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">Compartir infografía</h3>
        <button id="close-share" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <div class="grid grid-cols-3 gap-4 mb-6">
        <button class="share-btn-anim flex flex-col items-center justify-center p-3 bg-blue-100 dark:bg-blue-900 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 transition">
          <i class="fab fa-facebook-f text-blue-600 dark:text-blue-400 text-xl mb-2"></i>
          <span class="text-sm">Facebook</span>
        </button>
        <button class="share-btn-anim flex flex-col items-center justify-center p-3 bg-blue-100 dark:bg-blue-900 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 transition">
          <i class="fab fa-twitter text-blue-500 dark:text-blue-300 text-xl mb-2"></i>
          <span class="text-sm">Twitter</span>
        </button>
        <button class="share-btn-anim flex flex-col items-center justify-center p-3 bg-green-100 dark:bg-green-900 rounded-lg hover:bg-green-200 dark:hover:bg-green-800 transition">
          <i class="fab fa-whatsapp text-green-600 dark:text-green-400 text-xl mb-2"></i>
          <span class="text-sm">WhatsApp</span>
        </button>
      </div>
      <div class="relative">
        <input type="text" value="https://migracion-mexico.info/infografia" class="w-full py-2 px-3 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900 pr-16" readonly>
        <button id="copy-link" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white py-1 px-3 rounded text-sm">
          Copiar
        </button>
      </div>
    </div>
  </div>

  <!-- Modal para reproducir videos de YouTube -->
  <div id="video-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden video-modal-fade">
    <div class="rounded-lg shadow-lg p-4 relative max-w-2xl w-full video-modal-content-anim">
      <div id="video-modal-content" class="aspect-video w-full"></div>
    </div>
  </div>

  <script id="app-script">
    // Inicializar AOS con configuración mejorada
    AOS.init({
      duration: 800,
      once: false,
      mirror: true,
      offset: 100,
      easing: 'ease-in-out',
      delay: 100
    });
    
    // Manejo del tema oscuro/claro
    const themeToggle = document.getElementById('theme-toggle');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    
    // Cargar la preferencia de tema del usuario desde localStorage
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
      document.body.classList.add('dark-theme');
    }
    
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
      localStorage.setItem('theme', currentTheme);
    });
    
    // Botón de volver arriba
    const scrollTopBtn = document.getElementById('scroll-top-btn');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        scrollTopBtn.classList.add('visible');
      } else {
        scrollTopBtn.classList.remove('visible');
      }
    });
    
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
    
    // Manejo del diálogo de compartir
    const shareBtn = document.getElementById('share-btn');
    const shareDialog = document.getElementById('share-dialog');
    const closeShareBtn = document.getElementById('close-share');
    const copyLinkBtn = document.getElementById('copy-link');
    
    shareBtn.addEventListener('click', () => {
      shareDialog.classList.remove('hidden');
    });
    
    closeShareBtn.addEventListener('click', () => {
      shareDialog.classList.add('hidden');
    });
    
    copyLinkBtn.addEventListener('click', () => {
      const linkInput = copyLinkBtn.parentElement.querySelector('input');
      linkInput.select();
      document.execCommand('copy');
      
      // Cambiar temporalmente el texto del botón
      const originalText = copyLinkBtn.textContent;
      copyLinkBtn.textContent = '¡Copiado!';
      setTimeout(() => {
        copyLinkBtn.textContent = originalText;
      }, 2000);
    });
    
    // Cerrar diálogo al hacer clic fuera
    shareDialog.addEventListener('click', (e) => {
      if (e.target === shareDialog) {
        shareDialog.classList.add('hidden');
      }
    });
    
    // Gráficos para la sección de tipos de migración
    const initCharts = () => {
      // Definir colores que funcionen en ambos temas
      const colors = [
        'rgba(59, 130, 246, 0.8)',
        'rgba(245, 158, 11, 0.8)',
        'rgba(16, 185, 129, 0.8)',
        'rgba(239, 68, 68, 0.8)',
        'rgba(139, 92, 246, 0.8)'
      ];
      
      // Gráfico de motivos de migración
      const ctxMotivos = document.getElementById('chartMotivos').getContext('2d');
      const chartMotivos = new Chart(ctxMotivos, {
        type: 'pie',
        data: {
          labels: ['Económicos', 'Reunificación familiar', 'Seguridad', 'Educación', 'Otros'],
          datasets: [{
            data: [45, 22, 18, 10, 5],
            backgroundColor: colors,
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          animation: {
            animateScale: true,
            animateRotate: true,
            duration: 2000,
            easing: 'easeOutQuart'
          },
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `${context.label}: ${context.raw}%`;
                }
              }
            },
            legend: {
              position: 'bottom',
              labels: {
                padding: 20,
                font: {
                  size: 12
                }
              }
            }
          }
        }
      });
      
      // Gráfico de duración de migración
      const ctxDuracion = document.getElementById('chartDuracion').getContext('2d');
      const chartDuracion = new Chart(ctxDuracion, {
        type: 'doughnut',
        data: {
          labels: ['Permanente', 'Temporal', 'Estacional', 'Circular', 'Indeterminada'],
          datasets: [{
            data: [38, 25, 20, 12, 5],
            backgroundColor: colors,
            borderWidth: 1
          }]
        },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            animation: {
              animateScale: true,
              animateRotate: true,
              duration: 2000,
              easing: 'easeOutQuart'
            },
            plugins: {
              tooltip: {
                callbacks: {
                  label: function(context) {
                    return `${context.label}: ${context.raw}%`;
                  }
                }
              },
              legend: {
                position: 'bottom',
                labels: {
                  padding: 20,
                  font: {
                    size: 12
                  }
                }
              }
            }
          }
        });
      
      // Gráfico histórico
      const ctxHistorico = document.getElementById('chartHistorico').getContext('2d');
      const chartHistorico = new Chart(ctxHistorico, {
        type: 'bar',
        data: {
          labels: ['Emigración', 'Inmigración', 'Migración de tránsito', 'Remesas (MM USD)'],
          datasets: [{
            label: '1980',
            data: [120000, 30000, 15000, 500],
            backgroundColor: 'rgba(59, 130, 246, 0.6)',
            borderColor: 'rgba(59, 130, 246, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: {
            duration: 1500,
            easing: 'easeInOutQuart'
          },
          scales: {
            y: {
              beginAtZero: true
            }
          },
          plugins: {
            legend: {
              labels: {
                color: '#1f2937', // Darker text for better visibility in light theme
                font: {
                  weight: 'bold'
                }
              }
            },
            title: {
              color: '#1f2937' // Ensure title is visible
            }
          }
        }
      });
      
      // Update chart configuration when theme changes
      const updateChartTheme = () => {
        const isDark = document.body.classList.contains('dark-theme');
        const textColor = isDark ? '#e5e7eb' : '#1f2937';
        
        chartHistorico.options.plugins.legend.labels.color = textColor;
        chartHistorico.options.plugins.title.color = textColor;
        chartHistorico.update();
      };
      
      // Call initially and add listener to theme toggle
      updateChartTheme();
      document.getElementById('theme-toggle').addEventListener('click', updateChartTheme);
      
      // Actualización del gráfico histórico con los datos del año seleccionado
      const timelineItems = document.querySelectorAll('.timeline-item');
      
      // Datos históricos por año
      const historicalData = {
        '1970': [90000, 20000, 8000, 200],
        '1980': [120000, 30000, 15000, 500],
        '1990': [250000, 45000, 30000, 2200],
        '2000': [390000, 60000, 75000, 7500],
        '2010': [450000, 75000, 150000, 22000],
        '2020': [380000, 95000, 250000, 40000]
      };
      
      timelineItems.forEach(item => {
        item.addEventListener('click', () => {
          const year = item.getAttribute('data-year');
          
          // Actualizar datos del gráfico
          chartHistorico.data.datasets[0].label = year;
          chartHistorico.data.datasets[0].data = historicalData[year];
          chartHistorico.update();
          
          // Destacar el elemento seleccionado
          timelineItems.forEach(i => i.classList.remove('ring-2', 'ring-blue-500', 'scale-110'));
          item.classList.add('ring-2', 'ring-blue-500', 'scale-110');
        });
      });
      
      // Seleccionar el primer elemento por defecto
      timelineItems[0].click();
    };
    
    // Inicializar el mapa con animaciones
    const initMap = () => {
      const map = L.map('map-container').setView([23.6345, -102.5528], 5);
      
      // Usar un mapa base que se adapte al tema claro/oscuro
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19
      }).addTo(map);
      
      // Definir las principales ciudades de origen
      const origenCities = [
        { name: 'Oaxaca', coords: [17.0732, -96.7266] },
        { name: 'Michoacán', coords: [19.5665, -101.7068] },
        { name: 'Guerrero', coords: [17.5400, -99.5000] },
        { name: 'Chiapas', coords: [16.7569, -93.1292] },
        { name: 'Guanajuato', coords: [21.0190, -101.2574] }
      ];
      
      // Definir las principales rutas y destinos
      const routes = [
        { 
          origen: 'Oaxaca', 
          destino: 'California', 
          coords: [[17.0732, -96.7266], [20.5, -103.3], [25.6, -103.4], [29.0, -104.5], [32.7, -117.1]],
          year: 1980
        },
        { 
          origen: 'Michoacán', 
          destino: 'Illinois', 
          coords: [[19.5665, -101.7068], [23.2, -102.5], [27.5, -101.0], [31.8, -98.4], [41.8, -87.6]],
          year: 1985
        },
        { 
          origen: 'Guerrero', 
          destino: 'Nueva York', 
          coords: [[17.5400, -99.5000], [19.4, -99.1], [25.7, -100.3], [29.4, -98.5], [40.7, -74.0]],
          year: 1990
        },
        { 
          origen: 'Chiapas', 
          destino: 'Texas', 
          coords: [[16.7569, -93.1292], [18.0, -92.3], [20.9, -97.4], [25.8, -97.5], [29.7, -95.4]],
          year: 2000
        },
        { 
          origen: 'Guanajuato', 
          destino: 'Georgia', 
          coords: [[21.0190, -101.2574], [22.1, -100.9], [25.6, -100.3], [29.5, -95.1], [33.7, -84.4]],
          year: 2010
        }
      ];
      
      // Añadir marcadores para ciudades de origen
      origenCities.forEach(city => {
        L.circleMarker(city.coords, {
          radius: 8,
          fillColor: '#3b82f6',
          color: '#1d4ed8',
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
        }).bindPopup(`<b>${city.name}</b><br>Principal punto de origen`).addTo(map);
      });
      
      // Control deslizante para la línea de tiempo
      const slider = document.getElementById('timeline-slider');
      const yearDisplay = document.getElementById('year-display');
      
      // Añadir rutas según el año seleccionado con animación
      const updateRoutes = (selectedYear) => {
        // Actualizar el texto del año
        yearDisplay.textContent = selectedYear;
        
        // Limpiar las rutas existentes
        map.eachLayer(layer => {
          if (layer instanceof L.Polyline && !(layer instanceof L.TileLayer)) {
            map.removeLayer(layer);
          }
        });
        
        // Añadir las rutas que corresponden al año seleccionado o anteriores
        routes.forEach((route, index) => {
          if (route.year <= selectedYear) {
            setTimeout(() => {
              const polyline = L.polyline(route.coords, {
                color: '#f59e0b',
                weight: 3,
                opacity: 0.7,
                dashArray: '10, 10',
                className: 'route-path-container'
              }).addTo(map);
              
              polyline.bindPopup(`<b>Ruta: ${route.origen} → ${route.destino}</b><br>Establecida desde ${route.year}`);
              
              // Añadir marcador para el destino
              const destino = route.coords[route.coords.length - 1];
              L.circleMarker(destino, {
                radius: 6,
                fillColor: '#f59e0b',
                color: '#d97706',
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
              }).bindPopup(`<b>${route.destino}</b><br>Destino principal desde ${route.origen}`).addTo(map);
              
              // Forzar repintado para asegurar que la animación CSS se aplique
              requestAnimationFrame(() => {
                const pathElement = polyline.getElement();
                if (pathElement) {
                  // Eliminar la clase si existe para reiniciar la animación
                  pathElement.classList.remove('route-path');
                  // Forzar reflow para garantizar reinicio de animación
                  void pathElement.offsetWidth;
                  // Aplicar la clase de animación
                  pathElement.classList.add('route-path');
                }
              });
            }, index * 300); // Staggered animation
          }
        });
      };
      
      // Inicializar con el valor actual
      updateRoutes(parseInt(slider.value));
      
      // Actualizar cuando se mueve el deslizador
      slider.addEventListener('input', (e) => {
        updateRoutes(parseInt(e.target.value));
      });
    };
    
    // Añadir manejo de carga para elementos multimedia
    const setupMediaLoading = () => {
      const historiaCards = document.querySelectorAll('.historia-card');
      
      historiaCards.forEach(card => {
        // Convertir a contenedor de medios
        card.classList.add('media-container');
        
        // Añadir overlay de carga
        const loadingOverlay = document.createElement('div');
        loadingOverlay.className = 'media-loading';
        loadingOverlay.innerHTML = '<div class="spinner"></div>';
        card.appendChild(loadingOverlay);
        
        // Simular carga completada después de un tiempo
        setTimeout(() => {
          loadingOverlay.style.opacity = '0';
          setTimeout(() => {
            loadingOverlay.remove();
          }, 500);
        }, 1500 + Math.random() * 1000);
      });
    };
    
    // Inicializar Swiper para las historias
    const initSwiper = () => {
      const swiper = new Swiper('.historias-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        breakpoints: {
          640: {
            slidesPerView: 2,
            spaceBetween: 20,
          },
          1024: {
            slidesPerView: 3,
            spaceBetween: 30,
          },
        }
      });
    };
    
    // Inicializar todos los componentes cuando se carga la página
    document.addEventListener('DOMContentLoaded', () => {
      initCharts();
      initMap();
      initSwiper();
      setupMediaLoading();
      
      // Garantizar que el contenedor principal tenga animación de entrada
      const mainContainer = document.querySelector('main');
      mainContainer.classList.add('fade-in-container');
    });
    
    // Modal de video para historias de migrantes
    const videoModal = document.getElementById('video-modal');
    const videoModalContent = document.getElementById('video-modal-content');

    // Abrir modal al hacer clic en cualquier botón de reproducir
    document.querySelectorAll('.play-video-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const youtubeUrl = btn.getAttribute('data-youtube');
        if (youtubeUrl) {
          videoModalContent.innerHTML = `<iframe width="100%" height="400" src="${youtubeUrl}&autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
          videoModal.classList.remove('hidden', 'hide');
          videoModal.classList.add('show');
        }
      });
    });

    // Cerrar modal al hacer clic fuera del contenido, con animación
    videoModal.addEventListener('click', (e) => {
      if (e.target === videoModal) {
        videoModal.classList.remove('show');
        videoModal.classList.add('hide');
        setTimeout(() => {
          videoModal.classList.add('hidden');
          videoModal.classList.remove('hide');
          videoModalContent.innerHTML = '';
        }, 300); // Duración de la animación
      }
    });
  </script>
</body>
</html>
